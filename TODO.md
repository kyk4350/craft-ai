# ContentCraft AI - TODO List

## 📋 이미지 편집 에디터 구현

### Phase 1: Fabric.js 직접 편집 에디터 (우선순위)

- [ ] **1. Fabric.js 설치 및 기본 구조**
  - [ ] `npm install fabric react-colorful` 실행
  - [ ] `frontend/src/components/ImageEditor/` 폴더 생성
  - [ ] `ImageEditor.tsx` 컴포넌트 파일 생성
  - [ ] `TextControls.tsx` 컴포넌트 파일 생성

- [ ] **2. Canvas 초기화 및 이미지 로드**
  - [ ] Fabric Canvas 초기화 (1080x1080)
  - [ ] 생성된 이미지 URL로부터 이미지 로드
  - [ ] 이미지 크기 조정 및 Canvas에 추가
  - [ ] CORS 이슈 처리 (crossOrigin: 'anonymous')

- [ ] **3. 텍스트 레이어 추가 및 드래그**
  - [ ] 카피 텍스트를 Canvas에 텍스트 객체로 추가
  - [ ] 드래그로 위치 이동 가능하도록 설정
  - [ ] 모서리 핸들로 크기 조절 가능하도록 설정
  - [ ] 회전 기능 추가

- [ ] **4. 텍스트 편집 컨트롤 UI**
  - [ ] 색상 선택 팔레트 (흰색, 검정, 빨강, 파랑, 노랑)
  - [ ] 폰트 크기 슬라이더 (20~100px)
  - [ ] 폰트 선택 드롭다운 (Pretendard, Arial, Georgia 등)
  - [ ] 텍스트 정렬 버튼 (왼쪽, 가운데, 오른쪽)
  - [ ] 텍스트 효과: 그림자, 테두리, 배경색

- [ ] **5. PNG 다운로드 기능**
  - [ ] Canvas를 PNG로 변환 (`toDataURL()`)
  - [ ] 고해상도 다운로드 (2배 multiplier)
  - [ ] 파일명: `content-{timestamp}.png`
  - [ ] 다운로드 트리거

- [ ] **6. ContentResult 통합**
  - [ ] 선택 UI 추가 (직접 편집 vs AI 합성)
  - [ ] 직접 편집 버튼 클릭 → ImageEditor 열기
  - [ ] 뒤로가기 버튼으로 결과 화면 복귀
  - [ ] 저장 완료 시 알림 표시

---

### Phase 2: Ideogram v2 AI 합성 (차별화 기능)

- [ ] **1. AI 합성 UI 구현**
  - [ ] AI 합성 요청 화면 디자인
  - [ ] 자연어 입력 textarea (예: "텍스트를 더 크게")
  - [ ] 로딩 인디케이터 (10-20초 소요 안내)
  - [ ] 결과 미리보기

- [ ] **2. Ideogram v2 API 연동 (백엔드)**
  - [ ] `/api/content/compose-image` 엔드포인트 생성
  - [ ] `ideogram_service.generate_from_product_image()` 호출
  - [ ] 이미지 + 카피 + 사용자 요청 파라미터 전달
  - [ ] 생성된 이미지 URL 반환

- [ ] **3. 프론트엔드 API 연동**
  - [ ] AI 합성 요청 axios 호출
  - [ ] 로딩 상태 관리
  - [ ] 생성된 이미지 표시
  - [ ] 다운로드 버튼 추가

- [ ] **4. 챗봇 통합 (선택사항)**
  - [ ] 챗봇에서 "이미지에 텍스트 넣어줘" 인식
  - [ ] 자동으로 AI 합성 트리거
  - [ ] 결과를 챗봇 메시지로 표시

---

### Phase 3: 고급 기능 (추후 개선)

- [ ] **1. 템플릿 시스템**
  - [ ] 인스타그램 피드 (1:1, 1080x1080)
  - [ ] 인스타그램 스토리 (9:16, 1080x1920)
  - [ ] 페이스북 포스트 (4:5, 1200x1500)
  - [ ] 템플릿 선택 UI

- [ ] **2. 텍스트 스타일 프리셋**
  - [ ] Modern (Pretendard, 검정, 48px)
  - [ ] Elegant (Georgia, 회색, 36px)
  - [ ] Bold (Arial Bold, 흰색, 60px)
  - [ ] 프리셋 적용 버튼

- [ ] **3. 이미지 필터**
  - [ ] 밝기/대비/채도 조절 슬라이더
  - [ ] 필터 프리셋 (빈티지, 선명, 흑백, 세피아)
  - [ ] 실시간 미리보기

- [ ] **4. 레이어 관리**
  - [ ] 여러 텍스트 레이어 추가
  - [ ] 레이어 순서 변경 (앞으로/뒤로)
  - [ ] 레이어 삭제
  - [ ] 레이어 복제

- [ ] **5. 저장 및 공유**
  - [ ] 백엔드에 합성 이미지 저장
  - [ ] 저장된 이미지 갤러리
  - [ ] 소셜 미디어 공유 버튼
  - [ ] 클립보드 복사

---

## 🔄 현재 진행 상황

**완료:**
- ✅ SSE 기반 실시간 진행 상태 표시
- ✅ 전체 재생성 시 SSE 적용
- ✅ Nanobanana API 우선 사용 설정
- ✅ 레거시 컴포넌트 제거

**진행 중:**
- 🔄 이미지 편집 에디터 기획 완료
- 🔄 TODO 리스트 작성 완료

**다음 단계:**
- ⏳ Fabric.js 설치 및 기본 에디터 구현

---

## 📝 참고 사항

### 기술 스택
- **프론트엔드 에디터**: Fabric.js
- **AI 합성**: Ideogram v2 API
- **이미지 저장**: 기존 image_storage 서비스 활용

### 예상 소요 시간
- Phase 1 (Fabric.js 에디터): 2-3시간
- Phase 2 (Ideogram v2 연동): 1-2시간
- Phase 3 (고급 기능): 3-4시간

### 우선순위
1. **High**: Phase 1 (핵심 기능)
2. **Medium**: Phase 2 (차별화)
3. **Low**: Phase 3 (추후 개선)

---

## 🎯 목표

**단기 목표 (이번 주)**
- Fabric.js 기본 에디터 완성
- 이미지 + 텍스트 합성 및 다운로드 가능

**중기 목표 (다음 주)**
- Ideogram v2 AI 합성 기능 추가
- 템플릿 시스템 구현

**장기 목표 (2주 후)**
- 고급 편집 기능 완성
- 프로덕션 배포

---

_Last Updated: 2025-11-10_
